version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: 'Block #1'
    task:
      jobs:
        - name: Job checkout
          commands:
            - checkout
            - 'sudo apt-get update -y  '
            - 'sudo apt-get upgrade -y '
            - sudo apt-get dist-upgrade -y
            - sudo apt-get install build-essential software-properties-common -y
            - 'sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y'
            - sudo apt-get update -y
            - sudo apt-get install gcc-9 g++-9 -y
            - >-
              sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9
              60 --slave /usr/bin/g++ g++ /usr/bin/g++-9
            - sudo update-alternatives --config gcc
            - sudo apt install bison -y
            - sudo apt install flex -y
            - cd ./catmint-lex
            - make
            - ./qtest.sh
